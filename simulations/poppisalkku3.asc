Version 4
SHEET 1 3592 3860
WIRE -256 32 -432 32
WIRE -112 32 -256 32
WIRE 16 32 -112 32
WIRE 96 32 16 32
WIRE 256 32 192 32
WIRE 368 32 256 32
WIRE 448 32 368 32
WIRE -256 48 -256 32
WIRE -112 48 -112 32
WIRE 16 80 16 32
WIRE 32 80 16 80
WIRE 112 80 112 64
WIRE 112 80 96 80
WIRE -1696 96 -1744 96
WIRE -1648 96 -1696 96
WIRE -1648 128 -1648 96
WIRE -256 160 -256 128
WIRE -208 160 -256 160
WIRE -112 160 -112 128
WIRE -112 160 -144 160
WIRE 0 160 -112 160
WIRE 112 160 112 80
WIRE 112 160 0 160
WIRE 256 160 256 32
WIRE 112 176 112 160
WIRE -256 192 -256 160
WIRE -1744 240 -1744 96
WIRE 160 240 144 240
WIRE 256 240 256 224
WIRE 256 240 160 240
WIRE -1648 256 -1648 208
WIRE -1040 256 -1040 240
WIRE -400 256 -432 256
WIRE -256 256 -256 192
WIRE -256 256 -336 256
WIRE 256 256 256 240
WIRE 368 256 368 32
WIRE -1248 288 -1248 272
WIRE -400 352 -432 352
WIRE -256 352 -256 256
WIRE -256 352 -336 352
WIRE -96 352 -256 352
WIRE 256 352 256 336
WIRE 256 352 -32 352
WIRE 368 352 368 336
WIRE 368 352 256 352
WIRE -1744 368 -1744 320
WIRE -1040 368 -1040 336
WIRE 112 624 48 624
WIRE 416 624 192 624
WIRE 160 736 160 720
WIRE -160 768 -192 768
WIRE -48 768 -80 768
WIRE 48 768 48 624
WIRE 48 768 32 768
WIRE 64 768 48 768
WIRE 288 768 256 768
WIRE 288 800 256 800
WIRE -464 816 -464 784
WIRE 288 832 256 832
WIRE -528 864 -560 864
WIRE -192 864 -192 768
WIRE -160 864 -192 864
WIRE -48 864 -80 864
WIRE 288 864 256 864
WIRE -336 880 -400 880
WIRE -528 896 -608 896
WIRE 288 896 256 896
WIRE -1584 912 -1584 880
WIRE -1264 912 -1264 880
WIRE 656 912 656 880
WIRE -560 928 -560 864
WIRE -528 928 -560 928
WIRE 288 928 256 928
WIRE -560 960 -560 928
WIRE -528 960 -560 960
WIRE -192 960 -192 864
WIRE -160 960 -192 960
WIRE -64 960 -96 960
WIRE -48 960 -64 960
WIRE 288 960 256 960
WIRE 416 960 416 624
WIRE 496 960 416 960
WIRE 592 960 576 960
WIRE -1584 1008 -1584 992
WIRE -1264 1008 -1264 992
WIRE 336 1024 256 1024
WIRE 416 1024 416 960
WIRE 416 1024 336 1024
WIRE -496 1040 -496 1008
WIRE -432 1040 -432 1008
WIRE 288 1056 256 1056
WIRE 656 1056 656 1008
WIRE -336 1088 -336 880
WIRE 64 1088 -336 1088
WIRE 288 1088 256 1088
WIRE -208 1456 -288 1456
WIRE 112 1456 80 1456
WIRE 192 1456 112 1456
WIRE 256 1456 192 1456
WIRE 192 1504 192 1456
WIRE 112 1552 112 1456
WIRE 112 1552 80 1552
WIRE -64 1648 -64 1616
WIRE 192 1648 192 1568
WIRE 464 2064 464 2032
WIRE -624 2112 -688 2112
WIRE -352 2112 -544 2112
WIRE -176 2112 -352 2112
WIRE -304 2128 -304 2080
WIRE -432 2144 -432 2080
WIRE 736 2160 560 2160
WIRE -352 2176 -352 2112
WIRE -336 2176 -352 2176
WIRE -688 2192 -688 2112
WIRE -672 2192 -688 2192
WIRE -480 2192 -496 2192
WIRE -464 2192 -480 2192
WIRE -208 2192 -240 2192
WIRE -176 2192 -208 2192
WIRE 736 2192 736 2160
WIRE -352 2208 -352 2176
WIRE -352 2208 -368 2208
WIRE -336 2208 -352 2208
WIRE -688 2224 -688 2192
WIRE -480 2224 -480 2192
WIRE -464 2224 -480 2224
WIRE -1696 2240 -1696 2224
WIRE -1472 2240 -1472 2224
WIRE -1232 2240 -1232 2224
WIRE 368 2256 304 2256
WIRE 304 2288 304 2256
WIRE -1696 2336 -1696 2320
WIRE -1472 2336 -1472 2320
WIRE -1232 2336 -1232 2320
WIRE -688 2352 -688 2288
WIRE -624 2352 -688 2352
WIRE -480 2352 -480 2224
WIRE -480 2352 -560 2352
WIRE -336 2352 -480 2352
WIRE -208 2352 -208 2192
WIRE -208 2352 -256 2352
WIRE -688 2368 -688 2352
WIRE 400 2400 400 2368
WIRE 528 2400 528 2368
WIRE -112 2768 -112 2736
WIRE 48 2832 48 2736
WIRE -112 2880 -112 2848
WIRE -16 2880 -112 2880
WIRE -112 2928 -112 2880
WIRE 112 2928 48 2928
WIRE 288 2928 192 2928
WIRE -320 2976 -384 2976
WIRE -176 2976 -240 2976
WIRE -1424 3056 -1424 3024
WIRE -112 3072 -112 3024
WIRE -64 3520 -176 3520
WIRE 80 3520 0 3520
WIRE 192 3520 80 3520
WIRE -1136 3584 -1136 3568
WIRE -1792 3616 -1792 3600
WIRE -1392 3616 -1392 3600
WIRE -64 3648 -176 3648
WIRE 80 3648 80 3520
WIRE 80 3648 0 3648
WIRE -1136 3696 -1136 3664
FLAG 112 256 0
FLAG -1248 368 0
FLAG -1248 272 25V
FLAG -432 32 25V
FLAG -1648 256 0
FLAG 448 32 VOUT
FLAG 0 160 GATE
FLAG -256 192 SWITCH
FLAG -288 1456 VOUT
FLAG -1744 368 0
FLAG -1696 96 PWRBUTTON
FLAG -432 256 PWRBUTTON
FLAG -1584 1008 0
FLAG -1584 880 AUDIO
FLAG -64 1648 0
FLAG 192 1648 0
FLAG 656 880 INACTIVITY
FLAG -432 352 INACTIVITY
FLAG -608 896 AUDIO
FLAG -432 1040 0
FLAG 656 1056 0
FLAG -1264 1008 0
FLAG -496 1040 0
FLAG -1264 880 CLK
FLAG 32 768 CLK
FLAG -64 960 0
FLAG 160 720 VDD
FLAG 288 768 16sec
FLAG 288 800 32sec
FLAG 288 832 64sec
FLAG 288 864 128sec
FLAG 288 896 256sec
FLAG 288 928 512sec
FLAG 288 960 1024sec
FLAG 336 1024 4096sec
FLAG 288 1056 8192sec
FLAG 288 1088 16536sec
FLAG -1040 240 VOUT
FLAG -1040 368 0
FLAG -688 2368 0
FLAG 560 2256 ENABLE_BT
FLAG -176 2192 ENABLE_3.5MM
FLAG -1472 2336 0
FLAG -1472 2224 AUDIO100
FLAG -1696 2336 0
FLAG -1696 2224 AUDIO200
FLAG 528 2400 0
FLAG -1232 2224 ASW1
FLAG -1232 2336 ASW2
FLAG -672 2192 ASW2
FLAG -496 2192 ASW1
FLAG -176 2112 ENABLE_BT
FLAG 304 2288 0
FLAG 400 2400 0
FLAG -384 2976 ENABLE_BT
FLAG -112 3072 0
FLAG -112 2736 VOUT
FLAG 48 2736 VOUT
FLAG 288 2928 ENABLE_SIGNAL_FOR_DCDC
FLAG -1424 3024 ENABLE_SIGNAL_FOR_DCDC
FLAG -1424 3056 0
FLAG -1392 3696 0
FLAG -1392 3600 CHARGER_5V
FLAG -1136 3568 VCHARGE
FLAG -1136 3696 0
FLAG -1792 3696 0
FLAG -1792 3600 CHARGER_24V
FLAG -176 3520 CHARGER_24V
FLAG -176 3648 CHARGER_5V
FLAG 192 3520 VCHARGE
FLAG 736 2272 0
FLAG 368 2192 AUDIO200
FLAG 368 2128 AUDIO100
FLAG 256 1456 VDD
FLAG 464 2032 VDD
FLAG -432 2080 VDD
FLAG -304 2080 VDD
FLAG -464 784 VDD
SYMBOL pmos 192 80 M270
WINDOW 0 74 49 VLeft 2
WINDOW 3 108 123 VLeft 2
SYMATTR InstName M1
SYMATTR Value Si7461DP
SYMBOL nmos 160 160 M0
SYMATTR InstName M2
SYMATTR Value PSMN1R640YLC
SYMBOL res 240 240 R0
SYMATTR InstName R1
SYMATTR Value 300k
SYMBOL res 352 240 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 240 160 R0
SYMATTR InstName C1
SYMATTR Value 500n
SYMBOL cap 96 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL voltage -1248 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V1
SYMATTR Value 25
SYMBOL current -1648 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR SpiceLine load
SYMATTR InstName I1
SYMATTR Value PULSE(0 1 0.2 0.01 0.01 0.3 50 3)
SYMBOL res -272 32 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -128 32 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL cap -144 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL diode -32 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value BAV99HM
SYMBOL current -1744 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR SpiceLine load
SYMATTR InstName I2
SYMATTR Value PULSE(0 1 110 0.01 0.01 2 4 1)
SYMBOL voltage -1584 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 2 5 1.5 0 0 10)
SYMBOL cap 176 1504 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL diode -336 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL Comparators\\LTC1540 -464 816 R0
WINDOW 0 -58 -17 Left 2
WINDOW 3 14 -16 Left 2
SYMATTR InstName U2
SYMBOL npn 592 912 R0
SYMATTR InstName Q4
SYMBOL voltage -1264 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10k
SYMATTR InstName V4
SYMATTR Value SINE(0 5 2000)
SYMBOL cap -96 944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 1µ
SYMBOL res -64 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 40k
SYMBOL res -64 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 400k
SYMBOL res 592 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL diode 192 608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL cd4060 192 816 R0
SYMATTR InstName X1
SYMBOL diode -336 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res -1056 240 R0
SYMATTR InstName RLOAD
SYMATTR Value 100
SYMBOL cap -560 2336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL cap -704 2224 R0
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL res -240 2336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res -528 2096 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL Switches\\ADG1634 464 2208 M0
SYMATTR InstName U4
SYMBOL voltage -1472 2224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 2 100)
SYMBOL voltage -1696 2224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 2 200)
SYMBOL current -1232 2240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 108 Left 2
SYMATTR SpiceLine load
SYMATTR InstName I3
SYMATTR Value PULSE(0 1 0.1 0 0 0.1 0.2 4)
SYMBOL npn -176 2928 R0
SYMATTR InstName Q1
SYMBOL npn -16 2832 R0
SYMATTR InstName Q2
SYMBOL res -224 2960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5.1k
SYMBOL res -96 2864 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 33k
SYMBOL res 96 2944 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 7.8k
SYMBOL voltage -1392 3600 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL res -1152 3568 R0
SYMATTR InstName RLOAD1
SYMATTR Value 100
SYMBOL voltage -1792 3600 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V7
SYMATTR Value PULSE(0 24 0.15 0 0 0.3 0.6 1)
SYMBOL schottky -64 3536 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value RBQ20NS45A
SYMBOL schottky -64 3664 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value RBQ20NS45A
SYMBOL res 720 2176 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL CD4011B-VDD -432 2208 R0
SYMATTR InstName CD4011B-1
SYMBOL CD4011B-VDD -304 2192 R0
SYMATTR InstName CD4011B-2
SYMBOL PowerProducts\\LT1129-3.3 -64 1504 R0
SYMATTR InstName U1
TEXT -1896 -40 Left 2 !.tran 0 5 0 startup
TEXT -1896 -104 Left 3 ;Simulation stuff for power toggle
TEXT -768 -104 Left 3 ;Power toggle switch with turnoff delay
TEXT -768 1248 Left 3 ;DC/DC for inactivity detector and audio source selector
TEXT -776 472 Left 1 ;http://www.mosaic-industries.com/embedded-systems/microcontroller-projects/electronic-circuits/push-button-switch-turn-on/latching-toggle-power-switch
TEXT -776 568 Left 3 ;Audio inactivity detector
TEXT -1896 -64 Left 2 !.inc CD4000_v.lib
TEXT -224 656 Left 2 ;Actual 1Hz clock,\ntoo slow for simu
TEXT -352 1096 Left 1 ;restarts timer when audio level exceeds threshold
TEXT 192 616 Left 1 ;stops timer when timeout occurs
TEXT -768 1920 Left 3 ;Audio source selector
TEXT -1896 568 Left 3 ;Simulation stuff for inactivity timer
TEXT -1896 1240 Left 3 ;Simulation stuff for DC/DC
TEXT -1896 1912 Left 3 ;Simulation stuff for source selector
TEXT -768 2592 Left 3 ;Bluetooth DC/DC enable
TEXT -1896 2584 Left 3 ;Simulation stuff for bluetooth DC/DC
TEXT -784 3160 Left 1 ;https://www.tracopower.com/info/current-remote.pdf
TEXT 288 2960 Left 1 ;ON: floating\nOFF: 2-4 mA current source
TEXT -768 3264 Left 3 ;Automatic charger selector
TEXT -1896 3256 Left 3 ;Simulation stuff for automatic charger selector
TEXT 80 1936 Left 1 ;Just an example switch that has an simulation model. This IC requires DC bias for audio signals.\n \nMAX4910 is a lot easier to use as it can handle negative signals internally!
RECTANGLE Normal 848 496 -800 -144 1
RECTANGLE Normal 848 1840 -800 1200 1
RECTANGLE Normal 848 1168 -800 528 1
RECTANGLE Normal -32 1024 -224 704 4
RECTANGLE Normal 848 2512 -800 1872 1
RECTANGLE Normal -1920 496 -832 -144 1
RECTANGLE Normal -1920 1168 -832 528 1
RECTANGLE Normal -1920 1840 -832 1200 1
RECTANGLE Normal -1920 2512 -832 1872 1
RECTANGLE Normal 848 3184 -800 2544 1
RECTANGLE Normal -1920 3184 -832 2544 1
RECTANGLE Normal 848 3856 -800 3216 1
RECTANGLE Normal -1920 3856 -832 3216 1
